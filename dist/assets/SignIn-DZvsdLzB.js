import{b as z,r,u as V,j as e,L as x,v as q,c as h,d as A,l as L,e as N}from"./index-D2g3KFVD.js";const U=()=>{const i=z(),[y,j]=r.useState(),[l,w]=r.useState(""),[v,S]=r.useState(!1),[k,b]=r.useState(!1),[T,d]=r.useState(!1),[c,o]=r.useState(!1),[C,n]=r.useState(!1),[E,u]=r.useState(!1),[s,p]=r.useState({email:"",password:""}),f=V(),I=async()=>{if(l===""){u(!0);return}const t=await q({otp:l});t.data.status||S(!0),t.data.status===!0&&(localStorage.setItem("token",t.data.token),await h(i),f("/"))},O=async()=>{try{await A(s)&&b(!0)}catch(t){alert(t)}},P=async()=>{var m,g;const t=localStorage.getItem("token");if(s.email===""||s.password===""){o(!0);return}if(!((m=s==null?void 0:s.email)!=null&&m.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/))){n(!0);return}const a=await L(s);if(a!=null&&a.email){t&&localStorage.removeItem("token"),n(!0);return}else if(a!=null&&a.password){t&&localStorage.removeItem("token"),d(!0);return}await N(i,a.user),(g=a==null?void 0:a.user)!=null&&g.emailVerified?(s&&localStorage.removeItem("token"),localStorage.setItem("token",a==null?void 0:a.token),await h(i),f("/"),window.location.reload()):j(!0)};return e.jsx("div",{style:{color:"#005652",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"5em 0"},children:y?k?e.jsxs("div",{className:"register-container",children:[e.jsxs("h3",{style:{textTransform:"capitalize"},children:[" ","We have send an otp to your email please use that otp to verify your email"]}),e.jsx("p",{style:{textAlign:"center",fontSize:"16px",padding:"0.7em 0",fontWeight:"bold"},children:"OTP(One Time Password)"}),e.jsx("input",{style:{width:"50%",padding:"5px",fontSize:15,borderRadius:10,border:"1px solid grey"},onChange:t=>{w(t.target.value),u(!1)}}),E&&e.jsx("p",{style:{color:"red"},children:"OTP required"}),v&&e.jsx("p",{style:{color:"red",paddingTop:10},children:"Not a valid OTP"}),e.jsx("button",{style:{marginTop:"1rem",maxWidth:200},onClick:I,children:"Verify Email"})]}):e.jsxs("div",{className:"register-container",children:[e.jsx("p",{children:"Your email is not verified please Verify your email first"}),e.jsx("button",{onClick:O,children:"Verify"})]}):e.jsxs("div",{className:"register-container",children:[e.jsxs("h1",{children:["Sign in |"," ",e.jsx(x,{to:"/register",style:{color:"#99a79f"},children:"Register"})]}),e.jsx("p",{children:" Email Address *"}),e.jsx("input",{type:"email",value:s.email,required:!0,onChange:t=>{n(!1),p({...s,email:t.target.value}),o(!1)}}),c&&s.email===""&&e.jsx("p",{style:{color:"red"},children:"Email required"}),C&&e.jsx("p",{style:{color:"red"},children:"Email is not valid or you are not Signup"}),e.jsx("p",{children:"Password"}),e.jsx("input",{type:"password",required:!0,onChange:t=>{d(!1),p({...s,password:t.target.value}),o(!1)}}),c&&s.password===""&&e.jsx("p",{style:{color:"red"},children:"Password required"}),T&&e.jsx("p",{style:{color:"red"},children:"Password is not valid"}),e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:e.jsx(x,{to:"/forgot-password",style:{fontSize:20},children:"Forgot your password"})}),e.jsx("button",{style:{marginTop:"1em",fontSize:"30px",textAlign:"center",width:"35%",padding:"10px",border:"none",background:"#0b4640",color:"#fff",fontWeight:"bold",cursor:"pointer"},onClick:P,children:"Log in"})]})})};export{U as default};
