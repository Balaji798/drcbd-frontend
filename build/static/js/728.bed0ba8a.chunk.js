"use strict";(self.webpackChunkdrcbd_frontend=self.webpackChunkdrcbd_frontend||[]).push([[728],{2728:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f});var n=i(390),r=i(3423),s=i(1418),d=i(2893),l=i(9134),a=i(8132),o=i(2559);const c=e=>{let{userReviews:t}=e;if(0===t.length)return null;const i=t.reduce(((e,t)=>e+t.rating),0)/t.length;if(isNaN(i)||!isFinite(i))return null;return(0,o.jsx)("div",{children:(()=>{const e=Math.floor(i),t=i%1!==0;return Array.from({length:5},((i,n)=>n<e?(0,o.jsx)(a.dI3,{size:25},n):n===e&&t?(0,o.jsx)(a.zd8,{size:25},"".concat(e,"-half")):(0,o.jsx)(a.jsT,{size:25},"".concat(e+(t?1:0)+n,"-empty"))))})()})};var h=i(2522);const f=e=>{let{productId:t}=e;const[i,f]=(0,n.useState)(!1),[x,g]=(0,n.useState)(0),[p,u]=(0,n.useState)([]),[m,v]=(0,n.useState)([]),[y,j]=(0,n.useState)([]),w=localStorage.getItem("token"),[b,S]=(0,n.useState)({name:"",email:"",review:"",rating:"",productId:t});(0,n.useEffect)((()=>{k()}),[]);const k=async()=>{const e=await l.Z.post("https://drcbd-backend-zgqu.onrender.com/review/get-reviews-by-productId",{productId:t});j(e.data),v(e.data.slice(0,3))},z=e=>{const t=(x+("forward"===e?1:-1)+y.length)%y.length;if(t>=0&&t<y.length){g(t);const e=y.map(((e,i)=>p[(t+i)%p.length]));v(e.slice(0,3))}},C=e=>{const t=new Date(e),i=new Date-t,n=Math.floor(i/864e5),r=Math.floor(n/7),s=Math.floor(n/30);return 0===n?"Today":1===n?"Yesterday":1===r?"1 week ago":r>1&&r<4?"".concat(r," weeks ago"):1===s?"1 month ago":s>1?"".concat(s," months ago"):"More than a month ago"};return(0,o.jsxs)(o.Fragment,{children:[i&&(0,o.jsx)(h.Z,{setOpen:f,user:w}),(0,o.jsxs)("div",{className:"review-container center",style:{background:"#ededed"},children:[(0,o.jsxs)("div",{style:{maxWidth:"1200px",width:"100%",padding:"2rem 1rem 0"},children:[(0,o.jsx)("h1",{style:{fontFamily:"'Wix Madefor Text', sans-serif"},children:"Reviews"}),(0,o.jsx)("div",{style:{display:"flex",justifyContent:"space-between",paddingBottom:5},children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,o.jsx)("div",{style:{padding:"0.5rem 3rem",clipPath:"polygon(15% 0%, 100% 0%, 85% 100%, 0% 100%)",width:"18rem",background:"#0b4640",color:"#fff"},children:(0,o.jsx)("h1",{style:{fontSize:"30px"},children:(e=>{let t=0,i=0;for(const n of e)t+=n.rating,i++;return t/i>0?Math.round(t/i*10)/10:0})(y)})}),(0,o.jsx)("div",{style:{filter:"drop-shadow(-1px 6px 3px rgba(50, 50, 0, 0.5))",position:"absolute",marginLeft:"7rem"},children:(0,o.jsx)("div",{style:{background:"#fff",padding:"0.3rem 3rem",width:"15rem",clipPath:"polygon(15% 0%, 100% 0%, 85% 100%, 0% 100%)"},children:(0,o.jsx)("div",{style:{width:"90%",color:"#fdba09",paddingTop:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:y.length>0?(0,o.jsx)(c,{userReviews:y}):[1,2,3,4,5].map(((e,t)=>(0,o.jsx)(a.jsT,{size:25},t)))})})})]})}),(0,o.jsxs)("p",{children:[y.length," Reviews count"]})]}),(0,o.jsxs)("div",{className:"review-container",style:{maxWidth:"1200px",width:"100%",paddingBottom:"2rem",display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center"},children:[(0,o.jsxs)("div",{className:"reviews",children:[(0,o.jsxs)("div",{className:"vertical-slider",children:[m.length>2&&(0,o.jsx)(d.zob,{onClick:()=>z("forward"),style:{cursor:"pointer",alignSelf:"center",fontSize:"55px"}}),(0,o.jsx)("div",{style:{width:"100%"},children:m.map(((e,t)=>(0,o.jsxs)("div",{className:"review",children:[(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"6rem"},children:[(0,o.jsx)(r._Tb,{color:"#3cbb90",size:45}),(0,o.jsx)("p",{children:null===e||void 0===e?void 0:e.userName}),(0,o.jsx)("p",{style:{fontSize:11},children:"Verified"}),(0,o.jsx)("div",{style:{color:"yellow",paddingBottom:3},children:Array.from({length:null===e||void 0===e?void 0:e.rating},((e,t)=>t+1)).map(((e,t)=>(0,o.jsx)(s.aQ4,{},t)))})]}),(0,o.jsx)("p",{style:{paddingLeft:5,width:"70%",wordWrap:"break-word"},children:null===e||void 0===e?void 0:e.review}),(0,o.jsx)("p",{style:{fontSize:10,alignSelf:"flex-end"},children:C(null===e||void 0===e?void 0:e.createdAt)})]},t)))}),m.length>2&&(0,o.jsx)(d.uaK,{onClick:()=>z("backward"),style:{cursor:"pointer",alignSelf:"center",fontSize:"55px"}})]}),(0,o.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",width:"90%"},children:(0,o.jsxs)("a",{style:{textAlign:"end"},href:"#",children:[" ","See More ",">>"]})})]}),(0,o.jsxs)("div",{className:"add-review",children:[(0,o.jsx)("h2",{children:"Add Review"}),(0,o.jsx)("p",{style:{padding:"0.5rem 0"},children:"Your Rating"}),(0,o.jsx)("div",{style:{paddingLeft:5,height:50},children:(0,o.jsx)("div",{style:{paddingBottom:3},children:[1,2,3,4,5].map((e=>(0,o.jsx)(s.aQ4,{style:{fontSize:35,color:null!==p&&void 0!==p&&p.includes(e)?"#fdba09":"#fff",marginRight:"0.5rem"},onClick:()=>{u(Array.from({length:e},((e,t)=>t+1))),S({...b,rating:e})}})))})}),(0,o.jsx)("p",{style:{padding:"0.5rem 0"},children:"Your Review"}),(0,o.jsx)("textarea",{style:{width:"100%",height:"12rem",padding:"0.2rem 0.5rem"},onChange:e=>S({...b,review:e.target.value})}),(0,o.jsx)("div",{style:{display:"flex",alignItems:"flex-end",width:"100%",justifyContent:"flex-end"},children:(0,o.jsx)("div",{style:{alignSelf:"flex-end",background:"#fff",width:"5rem",color:"#0b4640",textAlign:"center",fontWeight:"bold",fontSize:20,padding:"0.5rem 0",cursor:"pointer"},onClick:async()=>{try{if(""===b.rating&&""===b.review)return void alert("Review and rating required ");if(w){const e={headers:{Authorization:"Bearer ".concat(w),"Content-Type":"application/json"}};await l.Z.post("https://drcbd-backend-zgqu.onrender.com/review/add-review",b,e),S({review:"",rating:"",productId:t}),k()}else f(!0)}catch(e){f(!0),alert(e)}},children:"Submit"})})]})]})]})]})}}}]);
//# sourceMappingURL=728.bed0ba8a.chunk.js.map