"use strict";(self.webpackChunkdrcbd_frontend=self.webpackChunkdrcbd_frontend||[]).push([[848],{3848:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var a=r(5400),o=r(390),s=r(9134),i=r(5545),n=r(1750),l=r(1733),d=r(2559);const c=()=>{const e=(0,n.I0)(),[t,r]=(0,o.useState)(),[c,u]=(0,o.useState)(""),[p,m]=(0,o.useState)(!1),[h,g]=(0,o.useState)(!1),[x,v]=(0,o.useState)(!1),[y,f]=(0,o.useState)(!1),[j,w]=(0,o.useState)(!1),[b,S]=(0,o.useState)(!1),[k,C]=(0,o.useState)({email:"",password:""}),I=(0,i.s0)();return(0,d.jsx)("div",{style:{color:"#005652",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"5em 0"},children:t?h?(0,d.jsxs)("div",{className:"register-container",children:[(0,d.jsxs)("h3",{style:{textTransform:"capitalize"},children:[" ","We have send an otp to your email please use that otp to verify your email"]}),(0,d.jsx)("p",{style:{textAlign:"center",fontSize:"16px",padding:"0.7em 0",fontWeight:"bold"},children:"OTP(One Time Password)"}),(0,d.jsx)("input",{style:{width:"50%",padding:"5px",fontSize:15,borderRadius:10,border:"1px solid grey"},onChange:e=>{u(e.target.value),S(!1)}}),b&&(0,d.jsx)("p",{style:{color:"red"},children:"OTP required"}),p&&(0,d.jsx)("p",{style:{color:"red",paddingTop:10},children:"Not a valid OTP"}),(0,d.jsx)("button",{style:{marginTop:"1rem",maxWidth:200},onClick:async()=>{if(""===c)return void S(!0);const t=await s.Z.post("https://drcbd-backend-test.onrender.com/user/email_verification",{otp:c});t.data.status||m(!0),!0===t.data.status&&(localStorage.setItem("token",t.data.token),await(0,l.Nq)(e),I("/"))},children:"Verify Email"})]}):(0,d.jsxs)("div",{className:"register-container",children:[(0,d.jsx)("p",{children:"Your email is not verified please Verify your email first"}),(0,d.jsx)("button",{onClick:async()=>{try{const{data:e}=await s.Z.post("https://drcbd-backend-test.onrender.com/user/send_otp",k);e.status&&g(!0)}catch(e){alert(e)}},children:"Verify"})]}):(0,d.jsxs)("div",{className:"register-container",children:[(0,d.jsxs)("h1",{children:["Sign in |"," ",(0,d.jsx)(a.rU,{to:"/register",style:{color:"#99a79f"},children:"Register"})]}),(0,d.jsx)("p",{children:" Email Address *"}),(0,d.jsx)("input",{type:"email",value:k.email,required:!0,onChange:e=>{w(!1),C({...k,email:e.target.value}),f(!1)}}),y&&""===k.email&&(0,d.jsx)("p",{style:{color:"red"},children:"Email required"}),j&&(0,d.jsx)("p",{style:{color:"red"},children:"Email is not valid or you are not Signup"}),(0,d.jsx)("p",{children:"Password"}),(0,d.jsx)("input",{type:"password",required:!0,onChange:e=>{v(!1),C({...k,password:e.target.value}),f(!1)}}),y&&""===k.password&&(0,d.jsx)("p",{style:{color:"red"},children:"Password required"}),x&&(0,d.jsx)("p",{style:{color:"red"},children:"Password is not valid"}),(0,d.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:(0,d.jsx)(a.rU,{to:"/forgot-password",style:{fontSize:20},children:"Forgot your password"})}),(0,d.jsx)("button",{style:{marginTop:"1em",fontSize:"30px",textAlign:"center",width:"35%",padding:"10px",border:"none",background:"#0b4640",color:"#fff",fontWeight:"bold",cursor:"pointer"},onClick:async()=>{var t,a,o,i,n;const d=localStorage.getItem("token");if(""===k.email||""===k.password)return void f(!0);if(null===k||void 0===k||null===(t=k.email)||void 0===t||!t.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/))return void w(!0);const c=await s.Z.post("https://drcbd-backend-test.onrender.com/user/login",k);return null!==c&&void 0!==c&&null!==(a=c.data)&&void 0!==a&&a.email?(d&&localStorage.removeItem("token"),void w(!0)):null!==c&&void 0!==c&&null!==(o=c.data)&&void 0!==o&&o.password?(d&&localStorage.removeItem("token"),void v(!0)):(await(0,l.cT)(e,c.data.user),void(null!==c&&void 0!==c&&null!==(i=c.data)&&void 0!==i&&null!==(n=i.user)&&void 0!==n&&n.emailVerified?(k&&localStorage.removeItem("token"),localStorage.setItem("token",c.data.token),await(0,l.Nq)(e),I("/"),window.location.reload()):r(!0)))},children:"Log in"})]})})}}}]);
//# sourceMappingURL=848.f9682648.chunk.js.map